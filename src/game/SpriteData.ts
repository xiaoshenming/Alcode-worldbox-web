// Sprite data definitions - palettes, pixel grids, creature/building sprites
// Separated from SpriteRenderer.ts for maintainability

import { BuildingType } from '../civilization/Civilization'

export type Direction = 'up' | 'down' | 'left' | 'right'

// Palette indices: 0 = transparent, 1+ = color from palette
export type PixelGrid = number[][]

export interface SpriteDef {
  down: PixelGrid
  left: PixelGrid
  up?: PixelGrid    // optional, derived from down if missing
  right?: PixelGrid // optional, mirrored from left if missing
}
// ============================================================
// Creature palettes (index 0 is always transparent)
// ============================================================
export const PALETTES: Record<string, string[]> = {
  human:  ['', '#e8b88a', '#3355aa', '#5544aa', '#222222'],
  //            skin      shirt     pants     hair
  elf:    ['', '#c8e8a8', '#226622', '#44aa44', '#ffffcc'],
  //            skin       tunic     cloak     hair
  dwarf:  ['', '#d4a574', '#884422', '#aa6633', '#664422'],
  //            skin       armor     beard     boots
  orc:    ['', '#5a8a3a', '#554433', '#443322', '#882222'],
  //            skin       armor     loincloth  eyes
  sheep:  ['', '#f0f0f0', '#dddddd', '#333333', '#ffaaaa'],
  //            wool       body      face      nose
  wolf:   ['', '#888888', '#666666', '#333333', '#aa3333'],
  //            fur        dark fur  nose/eye  tongue
  dragon: ['', '#cc2222', '#ff4444', '#ffaa00', '#222222'],
  //            body       wing      fire/eye  claw
}

// ============================================================
// Creature sprite data (8x8 grids)
// ============================================================
export const CREATURE_SPRITES: Record<string, SpriteDef> = {
  // ---- HUMAN ----
  human: {
    down: [
      [0,0,5,5,5,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
    left: [
      [0,0,5,5,0,0,0,0],
      [0,0,1,1,0,0,0,0],
      [0,0,1,1,0,0,0,0],
      [0,1,2,2,0,0,0,0],
      [0,0,2,2,0,0,0,0],
      [0,0,3,3,0,0,0,0],
      [0,0,3,3,0,0,0,0],
      [0,0,4,4,0,0,0,0],
    ],
    up: [
      [0,0,5,5,5,0,0,0],
      [0,0,5,5,5,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
  },

  // ---- ELF ----
  elf: {
    down: [
      [0,4,0,0,0,4,0,0],
      [0,4,1,1,1,4,0,0],
      [0,0,1,1,1,0,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,2,0,2,0,0,0],
      [0,0,2,0,2,0,0,0],
    ],
    left: [
      [0,4,4,0,0,0,0,0],
      [0,1,1,4,0,0,0,0],
      [0,1,1,0,0,0,0,0],
      [1,2,2,3,0,0,0,0],
      [0,3,3,0,0,0,0,0],
      [0,2,2,0,0,0,0,0],
      [0,2,2,0,0,0,0,0],
      [0,2,2,0,0,0,0,0],
    ],
    up: [
      [0,4,0,0,0,4,0,0],
      [0,4,4,4,4,4,0,0],
      [0,0,1,1,1,0,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,2,0,2,0,0,0],
      [0,0,2,0,2,0,0,0],
    ],
  },

  // ---- DWARF ----
  dwarf: {
    down: [
      [0,0,1,1,1,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,3,3,3,3,3,0,0],
      [0,2,2,2,2,2,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,4,0,4,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
    left: [
      [0,0,1,1,0,0,0,0],
      [0,0,1,1,0,0,0,0],
      [0,3,3,3,0,0,0,0],
      [0,2,2,2,0,0,0,0],
      [0,2,2,2,0,0,0,0],
      [0,0,2,2,0,0,0,0],
      [0,0,4,4,0,0,0,0],
      [0,0,4,4,0,0,0,0],
    ],
    up: [
      [0,0,1,1,1,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,0,1,1,1,0,0,0],
      [0,2,2,2,2,2,0,0],
      [0,2,2,2,2,2,0,0],
      [0,0,2,2,2,0,0,0],
      [0,0,4,0,4,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
  },

  // ---- ORC ----
  orc: {
    down: [
      [0,0,1,1,1,0,0,0],
      [0,1,4,1,4,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,2,2,2,2,2,0,0],
      [1,2,2,2,2,2,1,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,2,0,2,0,0,0],
    ],
    left: [
      [0,0,1,1,0,0,0,0],
      [0,4,1,1,0,0,0,0],
      [0,1,1,1,0,0,0,0],
      [1,2,2,2,0,0,0,0],
      [0,2,2,2,1,0,0,0],
      [0,3,3,0,0,0,0,0],
      [0,3,3,0,0,0,0,0],
      [0,2,2,0,0,0,0,0],
    ],
    up: [
      [0,0,1,1,1,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,2,2,2,2,2,0,0],
      [1,2,2,2,2,2,1,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,2,0,2,0,0,0],
    ],
  },

  // ---- SHEEP ----
  sheep: {
    down: [
      [0,0,0,0,0,0,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,4,3,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,2,2,2,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,3,0,3,0,0,0],
    ],
    left: [
      [0,0,0,0,0,0,0,0],
      [0,3,3,0,0,0,0,0],
      [0,3,4,0,0,0,0,0],
      [1,1,1,1,0,0,0,0],
      [1,2,2,1,0,0,0,0],
      [1,1,1,1,0,0,0,0],
      [0,3,0,3,0,0,0,0],
      [0,3,0,3,0,0,0,0],
    ],
    up: [
      [0,0,0,0,0,0,0,0],
      [0,0,3,3,3,0,0,0],
      [0,0,3,3,3,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,2,2,2,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,0,3,0,3,0,0,0],
      [0,0,3,0,3,0,0,0],
    ],
  },

  // ---- WOLF ----
  wolf: {
    down: [
      [0,1,0,0,0,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,2,3,1,3,2,0,0],
      [0,1,1,4,1,1,0,0],
      [0,0,1,1,1,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,2,0,0,0,2,0,0],
      [0,2,0,0,0,2,0,0],
    ],
    left: [
      [0,1,0,0,0,0,0,0],
      [0,1,1,1,1,0,0,0],
      [3,1,1,1,1,0,0,0],
      [0,1,1,1,2,2,0,0],
      [0,1,1,1,1,0,0,0],
      [0,2,0,2,0,0,0,0],
      [0,2,0,2,0,0,0,0],
      [0,0,0,0,0,0,0,0],
    ],
    up: [
      [0,1,0,0,0,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,0,0],
      [0,0,1,1,1,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,2,0,0,0,2,0,0],
      [0,2,0,0,0,2,0,0],
    ],
  },

  // ---- DRAGON ----
  dragon: {
    down: [
      [0,0,1,1,1,0,0,0],
      [0,1,3,1,3,1,0,0],
      [0,1,1,1,1,1,0,0],
      [2,1,1,1,1,1,2,0],
      [2,0,1,1,1,0,2,0],
      [0,0,1,1,1,0,0,0],
      [0,0,4,0,4,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
    left: [
      [0,0,1,1,0,0,0,0],
      [0,3,1,1,0,0,0,0],
      [0,1,1,1,0,0,0,0],
      [0,1,1,1,2,0,0,0],
      [0,1,1,1,2,0,0,0],
      [0,1,1,3,0,0,0,0],
      [0,4,4,0,0,0,0,0],
      [0,4,0,0,0,0,0,0],
    ],
    up: [
      [0,0,1,1,1,0,0,0],
      [0,1,1,1,1,1,0,0],
      [0,1,1,1,1,1,0,0],
      [2,1,1,1,1,1,2,0],
      [2,0,1,1,1,0,2,0],
      [0,0,1,1,1,0,0,0],
      [0,0,4,0,4,0,0,0],
      [0,0,4,0,4,0,0,0],
    ],
  },
}

// ============================================================
// Building sprite data (8x8 grids)
// ============================================================
export const BUILDING_PALETTES: Partial<Record<BuildingType, string[]>> = {
  [BuildingType.HUT]:      ['', '#8B7355', '#A0896A', '#665533', '#554422'],
  [BuildingType.HOUSE]:    ['', '#A0522D', '#C06030', '#884420', '#663311'],
  [BuildingType.FARM]:     ['', '#DAA520', '#CCBB44', '#88AA22', '#667722'],
  [BuildingType.BARRACKS]: ['', '#696969', '#888888', '#555555', '#AA3333'],
  [BuildingType.TOWER]:    ['', '#808080', '#999999', '#666666', '#AAAAAA'],
  [BuildingType.CASTLE]:   ['', '#B8860B', '#D4A830', '#8B6508', '#FFD700'],
  [BuildingType.MINE]:     ['', '#4A4A4A', '#666666', '#333333', '#AA8833'],
  [BuildingType.PORT]:     ['', '#5F9EA0', '#7BB8BA', '#447788', '#8B6914'],
}

export const BUILDING_SPRITES: Partial<Record<BuildingType, PixelGrid>> = {
  // HUT - small triangular roof hut
  [BuildingType.HUT]: [
    [0,0,0,1,1,0,0,0],
    [0,0,1,3,3,1,0,0],
    [0,1,3,3,3,3,1,0],
    [1,3,3,3,3,3,3,1],
    [0,2,2,2,2,2,2,0],
    [0,2,2,4,4,2,2,0],
    [0,2,2,4,4,2,2,0],
    [0,1,1,1,1,1,1,0],
  ],
  // HOUSE - two-story house
  [BuildingType.HOUSE]: [
    [0,0,1,1,1,1,0,0],
    [0,1,3,3,3,3,1,0],
    [1,3,3,3,3,3,3,1],
    [0,2,2,2,2,2,2,0],
    [0,2,4,2,2,4,2,0],
    [0,2,4,2,2,4,2,0],
    [0,2,2,4,4,2,2,0],
    [0,1,1,1,1,1,1,0],
  ],
  // FARM - field with crops
  [BuildingType.FARM]: [
    [0,0,0,0,0,0,0,0],
    [0,3,0,3,0,3,0,0],
    [0,4,0,4,0,4,0,0],
    [0,3,0,3,0,3,0,0],
    [0,4,0,4,0,4,0,0],
    [0,3,0,3,0,3,0,0],
    [1,1,1,1,1,1,1,0],
    [2,2,2,2,2,2,2,0],
  ],
  // BARRACKS - military building with flag
  [BuildingType.BARRACKS]: [
    [0,0,4,4,0,0,0,0],
    [0,0,3,0,0,0,0,0],
    [0,1,1,1,1,1,0,0],
    [0,1,2,2,2,1,0,0],
    [0,1,2,2,2,1,0,0],
    [0,1,2,4,2,1,0,0],
    [0,1,1,4,1,1,0,0],
    [0,3,3,3,3,3,0,0],
  ],
  // TOWER - tall stone tower
  [BuildingType.TOWER]: [
    [0,0,4,4,4,0,0,0],
    [0,0,3,1,3,0,0,0],
    [0,0,1,1,1,0,0,0],
    [0,0,1,3,1,0,0,0],
    [0,0,1,1,1,0,0,0],
    [0,0,1,3,1,0,0,0],
    [0,0,1,1,1,0,0,0],
    [0,1,1,1,1,1,0,0],
  ],
  // CASTLE - grand castle with towers
  [BuildingType.CASTLE]: [
    [0,4,0,4,4,0,4,0],
    [0,1,0,1,1,0,1,0],
    [0,1,1,1,1,1,1,0],
    [0,1,3,1,1,3,1,0],
    [0,2,2,2,2,2,2,0],
    [0,2,2,4,4,2,2,0],
    [0,2,2,4,4,2,2,0],
    [1,1,1,1,1,1,1,1],
  ],
  // MINE - mine entrance in hillside
  [BuildingType.MINE]: [
    [0,0,0,3,3,0,0,0],
    [0,0,3,3,3,3,0,0],
    [0,3,3,3,3,3,3,0],
    [3,3,3,2,2,3,3,3],
    [3,3,2,1,1,2,3,3],
    [0,0,2,1,1,2,0,0],
    [0,0,4,4,4,4,0,0],
    [0,0,0,0,0,0,0,0],
  ],
  // PORT - dock with boat
  [BuildingType.PORT]: [
    [0,0,0,4,0,0,0,0],
    [0,0,0,4,0,0,0,0],
    [0,0,4,4,4,0,0,0],
    [0,1,1,1,1,1,0,0],
    [1,2,2,2,2,2,1,0],
    [0,1,1,1,1,1,0,0],
    [0,3,3,3,3,3,0,0],
    [0,0,3,3,3,0,0,0],
  ],
}

// ============================================================
// Level 2+ building overlays (small additions to show upgrade)
// ============================================================
export const BUILDING_LEVEL_OVERLAYS: Record<number, PixelGrid> = {
  // Level 2: add a small banner/flag
  2: [
    [0,0,0,0,0,0,1,0],
    [0,0,0,0,0,0,1,0],
    [0,0,0,0,0,1,1,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
  ],
  // Level 3: add golden trim at bottom
  3: [
    [0,0,0,0,0,0,1,0],
    [0,0,0,0,0,0,1,0],
    [0,0,0,0,0,1,1,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [0,0,0,0,0,0,0,0],
    [1,1,1,1,1,1,1,1],
  ],
}

export const LEVEL_OVERLAY_PALETTE = ['', '#FFD700']

// ============================================================
// SpriteRenderer class
// ============================================================
